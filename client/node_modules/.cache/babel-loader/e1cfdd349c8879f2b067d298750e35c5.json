{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\dell\\\\Documents\\\\React\\\\Check-Inn-Morocco-teta\\\\Check-Inn-Morocco-V-Beta\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\dell\\\\Documents\\\\React\\\\Check-Inn-Morocco-teta\\\\Check-Inn-Morocco-V-Beta\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{START_LOADING,END_LOADING,FETCH_ALL,FETCH_POST,FETCH_BY_SEARCH,CREATE,UPDATE,DELETE,LIKE,COMMENT,FETCH_BY_CREATOR}from'../constants/actionTypes';import*as api from'../api/index.js';export var getRestau=function getRestau(id){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$api$fetchResta,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:START_LOADING});_context.next=4;return api.fetchRestau(id);case 4:_yield$api$fetchResta=_context.sent;data=_yield$api$fetchResta.data;dispatch({type:FETCH_POST,payload:{post:data}});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getRestaus=function getRestaus(page){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _yield$api$fetchResta2,_yield$api$fetchResta3,data,currentPage,numberOfPages;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:START_LOADING});_context2.next=4;return api.fetchRestaus(page);case 4:_yield$api$fetchResta2=_context2.sent;_yield$api$fetchResta3=_yield$api$fetchResta2.data;data=_yield$api$fetchResta3.data;currentPage=_yield$api$fetchResta3.currentPage;numberOfPages=_yield$api$fetchResta3.numberOfPages;dispatch({type:FETCH_ALL,payload:{data:data,currentPage:currentPage,numberOfPages:numberOfPages}});dispatch({type:END_LOADING});_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[0,13]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var getRestausByCreator=function getRestausByCreator(name){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var _yield$api$fetchResta4,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:START_LOADING});_context3.next=4;return api.fetchRestausByCreator(name);case 4:_yield$api$fetchResta4=_context3.sent;data=_yield$api$fetchResta4.data.data;dispatch({type:FETCH_BY_CREATOR,payload:{data:data}});dispatch({type:END_LOADING});_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var getRestausBySearch=function getRestausBySearch(searchQuery){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var _yield$api$fetchResta5,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;dispatch({type:START_LOADING});_context4.next=4;return api.fetchRestausBySearch(searchQuery);case 4:_yield$api$fetchResta5=_context4.sent;data=_yield$api$fetchResta5.data.data;dispatch({type:FETCH_BY_SEARCH,payload:{data:data}});dispatch({type:END_LOADING});_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[0,10]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var createRestau=function createRestau(post,history){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var _yield$api$createRest,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;dispatch({type:START_LOADING});_context5.next=4;return api.createRestau(post);case 4:_yield$api$createRest=_context5.sent;data=_yield$api$createRest.data;dispatch({type:CREATE,payload:data});history.push(\"/restaus\");_context5.next=13;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);case 13:case\"end\":return _context5.stop();}}},_callee5,null,[[0,10]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var updateRestau=function updateRestau(id,post){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var _yield$api$updateRest,data;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return api.updateRestau(id,post);case 3:_yield$api$updateRest=_context6.sent;data=_yield$api$updateRest.data;dispatch({type:UPDATE,payload:data});_context6.next=11;break;case 8:_context6.prev=8;_context6.t0=_context6[\"catch\"](0);console.log(_context6.t0);case 11:case\"end\":return _context6.stop();}}},_callee6,null,[[0,8]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};export var likeRestau=function likeRestau(id){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var user,_yield$api$likeRestau,data;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:user=JSON.parse(localStorage.getItem('profile'));_context7.prev=1;_context7.next=4;return api.likeRestau(id,user===null||user===void 0?void 0:user.token);case 4:_yield$api$likeRestau=_context7.sent;data=_yield$api$likeRestau.data;dispatch({type:LIKE,payload:data});_context7.next=12;break;case 9:_context7.prev=9;_context7.t0=_context7[\"catch\"](1);console.log(_context7.t0);case 12:case\"end\":return _context7.stop();}}},_callee7,null,[[1,9]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};export var commentRestau=function commentRestau(value,id){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var _yield$api$commentRes,data;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return api.commentRestau(value,id);case 3:_yield$api$commentRes=_context8.sent;data=_yield$api$commentRes.data;dispatch({type:COMMENT,payload:data});return _context8.abrupt(\"return\",data.comments);case 9:_context8.prev=9;_context8.t0=_context8[\"catch\"](0);console.log(_context8.t0);case 12:case\"end\":return _context8.stop();}}},_callee8,null,[[0,9]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};export var deleteRestau=function deleteRestau(id){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;_context9.next=3;return api.deleteRestau(id);case 3:dispatch({type:DELETE,payload:id});_context9.next=9;break;case 6:_context9.prev=6;_context9.t0=_context9[\"catch\"](0);console.log(_context9.t0);case 9:case\"end\":return _context9.stop();}}},_callee9,null,[[0,6]]);}));return function(_x9){return _ref9.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/dell/Documents/React/Check-Inn-Morocco-teta/Check-Inn-Morocco-V-Beta/client/src/actions/restaus.js"],"names":["START_LOADING","END_LOADING","FETCH_ALL","FETCH_POST","FETCH_BY_SEARCH","CREATE","UPDATE","DELETE","LIKE","COMMENT","FETCH_BY_CREATOR","api","getRestau","id","dispatch","type","fetchRestau","data","payload","post","console","log","getRestaus","page","fetchRestaus","currentPage","numberOfPages","getRestausByCreator","name","fetchRestausByCreator","getRestausBySearch","searchQuery","fetchRestausBySearch","createRestau","history","push","updateRestau","likeRestau","user","JSON","parse","localStorage","getItem","token","commentRestau","value","comments","deleteRestau"],"mappings":"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","sourcesContent":["import { START_LOADING, END_LOADING, FETCH_ALL, FETCH_POST, FETCH_BY_SEARCH, CREATE, UPDATE, DELETE, LIKE, COMMENT, FETCH_BY_CREATOR } from '../constants/actionTypes';\r\nimport * as api from '../api/index.js';\r\n\r\nexport const getRestau = (id) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: START_LOADING });\r\n\r\n    const { data } = await api.fetchRestau(id);\r\n\r\n    dispatch({ type: FETCH_POST, payload: { post: data } });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getRestaus = (page) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: START_LOADING });\r\n    const { data: { data, currentPage, numberOfPages } } = await api.fetchRestaus(page);\r\n\r\n    dispatch({ type: FETCH_ALL, payload: { data, currentPage, numberOfPages } });\r\n    dispatch({ type: END_LOADING });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getRestausByCreator = (name) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: START_LOADING });\r\n    const { data: { data } } = await api.fetchRestausByCreator(name);\r\n\r\n    dispatch({ type: FETCH_BY_CREATOR, payload: { data } });\r\n    dispatch({ type: END_LOADING });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getRestausBySearch = (searchQuery) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: START_LOADING });\r\n    const { data: { data } } = await api.fetchRestausBySearch(searchQuery);\r\n\r\n    dispatch({ type: FETCH_BY_SEARCH, payload: { data } });\r\n    dispatch({ type: END_LOADING });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const createRestau = (post, history) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: START_LOADING });\r\n    const { data } = await api.createRestau(post);\r\n\r\n    dispatch({ type: CREATE, payload: data });\r\n\r\n    history.push(`/restaus`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const updateRestau = (id, post) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.updateRestau(id, post);\r\n\r\n    dispatch({ type: UPDATE, payload: data });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const likeRestau = (id) => async (dispatch) => {\r\n  const user = JSON.parse(localStorage.getItem('profile'));\r\n\r\n  try {\r\n    const { data } = await api.likeRestau(id, user?.token);\r\n\r\n    dispatch({ type: LIKE, payload: data });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const commentRestau = (value, id) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.commentRestau(value, id);\r\n\r\n    dispatch({ type: COMMENT, payload: data });\r\n\r\n    return data.comments;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const deleteRestau = (id) => async (dispatch) => {\r\n  try {\r\n    await await api.deleteRestau(id);\r\n\r\n    dispatch({ type: DELETE, payload: id });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}